<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="../resources/theme1/template/layout.xhtml">

	<ui:define name="header">
		<h1>ProxiBanque : une banque proche de ses clients ...</h1>

		<div>
			<menu class="nav-pills nav-justified">
				<li class="menu_ind "><a href="indexConseiller.xhtml">
						Accueil </a></li>
				<li class="menu_ind "><a
					href="../deconnexion/deconnexion.xhtml"> Deconnexion </a></li>
				<li class="menu_ind "><a href="contact.xhtml"> Contact </a></li>
			</menu>
		</div>
	</ui:define>

	<ui:define name="content">
		<h3>Accueil Conseiller</h3>
		<fieldset>
			<legend>Liste des Clients de l'Agence dont vous êtes le
				conseiller :</legend>
				<h:dataTable class="table" value="#{conseillerbean.ListeClients()}"
					var="c">
					<h:column>
						<f:facet name="header"> Id Client </f:facet>
	    				#{c.idPersonne}
	    			</h:column>
					<h:column>
						<f:facet name="header"> Civilité </f:facet>
	    				#{c.civilite}
	    			</h:column>

					<h:column>
						<f:facet name="header"> Prénom </f:facet>
	    				#{c.prenom}
	    			</h:column>
					<h:column>
						<f:facet name="header"> Nom </f:facet>
	    				#{c.nom}
	    			</h:column>

					<h:column>
						<f:facet name="header"> EstSociete </f:facet>
	    				#{c.estSociete}
	    	</h:column>
					<h:column>
						<span class="listcol"></span>
						<f:facet id="headercol" name="header"> Modifier un client </f:facet>
						<h:form>
							<p:commandLink action="#{clientbean.goModifCli}" process="@form">
								<span class="glyphicon glyphicon-edit"></span>
								<f:setPropertyActionListener value="#{c.idPersonne}"
									target="#{clientbean.id}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.nom}"
									target="#{clientbean.nom}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.prenom}"
									target="#{clientbean.prenom}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.email}"
									target="#{clientbean.email}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.adresse}"
									target="#{clientbean.adresse}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.ville}"
									target="#{clientbean.ville}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.codePostal}"
									target="#{clientbean.cp}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.telephone}"
									target="#{clientbean.telephone}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.idCoordonnees}"
									target="#{clientbean.idC}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.civilite}"
									target="#{clientbean.civilite}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.conseiller}"
									target="#{clientbean.conseiller}"></f:setPropertyActionListener>
								<!-- 						<f:setPropertyActionListener value="#{c.listeCompte}" target="#{clientbean.listecomptes}"></f:setPropertyActionListener> -->
							</p:commandLink>
						</h:form>
					</h:column>
					<h:column>
					<span class="listcol"></span>
						<f:facet id="headercol" name="header"> Liste des comptes </f:facet>
						<h:form>
							<p:commandLink action="#{clientbean.goCompteCli}" process="@form">
								<span class="glyphicon glyphicon-list-alt"></span>
								<f:setPropertyActionListener value="#{c.idPersonne}"
									target="#{clientbean.id}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.nom}"
									target="#{clientbean.nom}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.prenom}"
									target="#{clientbean.prenom}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.email}"
									target="#{clientbean.email}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.adresse}"
									target="#{clientbean.adresse}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.ville}"
									target="#{clientbean.ville}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.codePostal}"
									target="#{clientbean.cp}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.telephone}"
									target="#{clientbean.telephone}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.civilite}"
									target="#{clientbean.civilite}"></f:setPropertyActionListener>
								<f:setPropertyActionListener value="#{c.conseiller}"
									target="#{clientbean.conseiller}"></f:setPropertyActionListener>
								<f:setPropertyActionListener
									value="#{c.coordonneesClient.idCoordonnees}"
									target="#{clientbean.idC}"></f:setPropertyActionListener>
								<!-- 						<f:setPropertyActionListener value="#{c.listeCompte}" target="#{clientbean.listecomptes}"></f:setPropertyActionListener> -->
							</p:commandLink>
						</h:form>

					</h:column>
				</h:dataTable>

				<h:form>
					<p:commandButton action="#{clientbean.goCreerCli}"
						value="Creation d'un Client" process="@form" />
				</h:form>
		</fieldset>
		<br/><br/>
	</ui:define>
</ui:composition>

